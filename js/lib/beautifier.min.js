!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("beautifier",[],t):"object"==typeof exports?exports.beautifier=t():e.beautifier=t()}("undefined"!=typeof self?self:"undefined"!=typeof windows?window:"undefined"!=typeof global?global:this,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){var n="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",i="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",r=new RegExp("[$@A-Z_a-z"+n+"]"),a=new RegExp("[$0-9A-Z_a-z"+n+i+"]");t.identifier=new RegExp("[$@A-Z_a-z"+n+"][$0-9A-Z_a-z"+n+i+"]*","g"),t.newline=/[\n\r\u2028\u2029]/,t.lineBreak=new RegExp("\r\n|"+t.newline.source),t.allLineBreaks=new RegExp(t.lineBreak.source,"g"),t.isIdentifierStart=function(e){return r.test(String.fromCharCode(e))},t.isIdentifierChar=function(e){return a.test(String.fromCharCode(e))}},function(e,t){e.exports.mergeOpts=function(e,t){var n,i={};for(n in e)n!==t&&(i[n]=e[n]);if(t in e)for(n in e[t])i[n]=e[t][n];return i}},function(e,t){e.exports.InputScanner=function(e){var t=e||"",n=t.length,i=0;this.back=function(){i>0&&(i-=1)},this.hasNext=function(){return i<n},this.next=function(){var e=null;return this.hasNext()&&(e=t.charAt(i),i+=1),e},this.peek=function(e){var r=null;return e=e||0,(e+=i)>=0&&e<n&&(r=t.charAt(e)),r},this.test=function(e,r){if(r=r||0,r+=i,e.lastIndex=r,r>=0&&r<n){var a=e.exec(t);return a&&a.index===r}return!1},this.testChar=function(e,t){var n=this.peek(t);return null!==n&&e.test(n)},this.match=function(e){e.lastIndex=i;var n=e.exec(t);return n&&n.index===i?i+=n[0].length:n=null,n},this.readWhile=function(e){var t="",n=this.match(e);return n&&(t=n[0]),t},this.readUntil=function(e){var r,a=i;e.lastIndex=i;var s=e.exec(t);return a=s?s.index:n,r=t.substring(i,a),i=a,r},this.readUntilAfter=function(e){var r,a=i;e.lastIndex=i;var s=e.exec(t);return a=s?s.index+s[0].length:n,r=t.substring(i,a),i=a,r},this.peekUntilAfter=function(e){var t=i,n=this.readUntilAfter(e);return i=t,n},this.lookBack=function(e){var n=i-1;return n>=e.length&&t.substring(n-e.length,n).toLowerCase()===e}}},function(e,t){e.exports.Output=function(e,t){t=t||"",this.indent_cache=[t],this.baseIndentLength=t.length,this.indent_length=e.length,this.raw=!1,this._lines=[],this.baseIndentString=t,this.indent_string=e,this.previous_line=null,this.current_line=null,this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new function(e){this._character_count=0,this._indent_count=-1,this._items=[];var t=!0;this.set_indent=function(t){this._character_count=e.baseIndentLength+t*e.indent_length,this._indent_count=t},this.get_character_count=function(){return this._character_count},this.is_empty=function(){return t},this.last=function(){return this._empty?null:this._items[this._items.length-1]},this.push=function(e){this._items.push(e),this._character_count+=e.length,t=!1},this.pop=function(){var e=null;return t||(e=this._items.pop(),this._character_count-=e.length,t=0===this._items.length),e},this.remove_indent=function(){this._indent_count>0&&(this._indent_count-=1,this._character_count-=e.indent_length)},this.trim=function(){for(;" "===this.last();)this._items.pop(),this._character_count-=1;t=0===this._items.length},this.toString=function(){var t="";return this._empty||(this._indent_count>=0&&(t=e.indent_cache[this._indent_count]),t+=this._items.join("")),t}}(this),this._lines.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return this._lines.length},this.add_new_line=function(e){return!(1===this.get_line_number()&&this.just_added_newline()||!e&&this.just_added_newline()||(this.raw||this.add_outputline(),0))},this.get_code=function(e,t){var n=this._lines.join("\n").replace(/[\r\n\t ]+$/,"");return e&&(n+="\n"),"\n"!==t&&(n=n.replace(/[\n]/g,t)),n},this.set_indent=function(e){if(this._lines.length>1){for(;e>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string);return this.current_line.set_indent(e),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.add_outputline();this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1},this.add_token=function(e){this.add_space_before_token(),this.current_line.push(e)},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),this.space_before_token=!1},this.remove_indent=function(e){for(var t=this._lines.length;e<t;)this._lines[e].remove_indent(),e++},this.trim=function(n){for(n=void 0!==n&&n,this.current_line.trim(e,t);n&&this._lines.length>1&&this.current_line.is_empty();)this._lines.pop(),this.current_line=this._lines[this._lines.length-1],this.current_line.trim();this.previous_line=this._lines.length>1?this._lines[this._lines.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()},this.just_added_blankline=function(){return!!this.just_added_newline()&&(1===this._lines.length||this._lines[this._lines.length-2].is_empty())}}},function(e,t,n){var i=n(2).InputScanner,r=n(8).Token,a=n(0);function s(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}var _={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",EOF:"TK_EOF"};e.exports.Tokenizer=function(e,t){var n=/[\n\r\u2028\u2029\t ]+/g,o=/([\t ]*)(\r\n|[\n\r\u2028\u2029])?/g,l=/0[xX][0123456789abcdefABCDEF]*|0[oO][01234567]*|0[bB][01]*|\d+n|(?:\.\d+|\d+\.?\d*)(?:[eE][+-]?\d+)?/g,c=/[0-9]/;this.positionable_operators="!= !== % & && * ** + - / : < << <= == === > >= >> >>> ? ^ | ||".split(" ");var p=this.positionable_operators.concat("! %= &= *= **= ++ += , -- -= /= :: <<= = => >>= >>>= ^= |= ~ ...".split(" "));this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",");var u,h,d,f,E,x=this.line_starters.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),m=/([\s\S]*?)((?:\*\/)|$)/g,g=/([^\n\r\u2028\u2029]*)/g,b=/\/\* beautify( \w+[:]\w+)+ \*\//g,v=/ (\w+)[:](\w+)/g,w=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,k=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g;function R(){var e,R;if(u=0,h="",R=f.length?f[f.length-1]:new r(_.START_BLOCK,"{"),""!==(e=E.readWhile(n)))if(" "===e)h=e;else{o.lastIndex=0;for(var T=o.exec(e);T[2];)u+=1,T=o.exec(e);h=T[1]}if(""!==(e=E.readWhile(a.identifier)))return R.type===_.DOT||R.type===_.RESERVED&&s(R.text,["set","get"])||!s(e,x)?[e,_.WORD]:"in"===e||"of"===e?[e,_.OPERATOR]:[e,_.RESERVED];if(""!==(e=E.readWhile(l)))return[e,_.WORD];var O=E.next();if(null===O)return["",_.EOF];if("("===O||"["===O)return[O,_.START_EXPR];if(")"===O||"]"===O)return[O,_.END_EXPR];if("{"===O)return[O,_.START_BLOCK];if("}"===O)return[O,_.END_BLOCK];if(";"===O)return[O,_.SEMICOLON];if("/"===O){var y="";if("*"===E.peek()){E.next();var S=function(e){if(!e.match(b))return null;var t={};v.lastIndex=0;for(var n=v.exec(e);n;)t[n[1]]=n[2],n=v.exec(e);return t}(y="/*"+E.match(m)[0]);return S&&"start"===S.ignore&&(y+=E.match(w)[0]),[y=y.replace(a.allLineBreaks,"\n"),_.BLOCK_COMMENT,S]}if("/"===E.peek())return E.next(),[y="//"+E.match(g)[0],_.COMMENT]}var A=/<()([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g,N=/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g;function C(){return R.type===_.RESERVED&&s(R.text,["return","case","throw","else","do","typeof","yield"])||R.type===_.END_EXPR&&")"===R.text&&R.parent&&R.parent.type===_.RESERVED&&s(R.parent.text,["if","while","for"])||s(R.type,[_.COMMENT,_.START_EXPR,_.START_BLOCK,_.END_BLOCK,_.OPERATOR,_.EQUALS,_.EOF,_.SEMICOLON,_.COMMA])}var D="`"===O||"'"===O||'"'===O,L="/"===O&&C(),K=t.e4x&&"<"===O&&E.test(A,-1)&&C(),I=O,M=!1,P=!1;if(e=O,D){var B=function(t,n,i){for(var r;E.hasNext()&&(r=E.peek(),M||r!==t&&(n||!a.newline.test(r)));)(M||n)&&a.newline.test(r)?("\r"===r&&"\n"===E.peek(1)&&(E.next(),r=E.peek()),e+="\n"):e+=r,M?("x"!==r&&"u"!==r||(P=!0),M=!1):M="\\"===r,E.next(),i&&-1!==e.indexOf(i,e.length-i.length)&&("`"===t?B("}",n,"`"):B("`",n,"${"),E.hasNext()&&(e+=E.next()))};"`"===I?B("`",!0,"${"):B(I)}else if(L)for(var j=!1;E.hasNext()&&(M||j||E.peek()!==I)&&!E.testChar(a.newline);)e+=E.peek(),M?M=!1:(M="\\"===E.peek(),"["===E.peek()?j=!0:"]"===E.peek()&&(j=!1)),E.next();else if(K){E.back();var V="",U=E.match(A);if(U){for(var W=U[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),G=0===W.indexOf("{"),z=0;U;){var X=!!U[1],$=U[2];if(!(U[U.length-1]||"![CDATA["===$.slice(0,8))&&($===W||G&&$.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(X?--z:++z),V+=U[0],z<=0)break;U=E.match(N)}return U||(V+=E.match(/[\s\S]*/g)[0]),[V=V.replace(a.allLineBreaks,"\n"),_.STRING]}}if(L||D)return P&&t.unescape_strings&&(e=function(e){for(var t="",n=0,r=new i(e),a=null;r.hasNext();)if((a=r.match(/([\s]|[^\\]|\\\\)+/g))&&(t+=a[0]),"\\"===r.peek()){if(r.next(),"x"===r.peek())a=r.match(/x([0-9A-Fa-f]{2})/g);else{if("u"!==r.peek()){t+="\\",r.hasNext()&&(t+=r.next());continue}a=r.match(/u([0-9A-Fa-f]{4})/g)}if(!a)return e;if((n=parseInt(a[1],16))>126&&n<=255&&0===a[0].indexOf("x"))return e;if(n>=0&&n<32){t+="\\"+a[0];continue}t+=34===n||39===n||92===n?"\\"+String.fromCharCode(n):String.fromCharCode(n)}return t}(e)),E.peek()===I&&(e+=I,E.next(),"/"===I&&(e+=E.readWhile(a.identifier))),[e,_.STRING];if("#"===O){if(0===f.length&&"!"===E.peek()){for(e=O;E.hasNext()&&"\n"!==O;)O=E.next(),e+=O;return[function(e){return e.replace(/^\s+|\s+$/g,"")}(e)+"\n",_.UNKNOWN]}var F="#";if(E.hasNext()&&E.testChar(c)){do{F+=O=E.next()}while(E.hasNext()&&"#"!==O&&"="!==O);return"#"===O||("["===E.peek()&&"]"===E.peek(1)?(F+="[]",E.next(),E.next()):"{"===E.peek()&&"}"===E.peek(1)&&(F+="{}",E.next(),E.next())),[F,_.WORD]}}if("<"===O&&("?"===E.peek()||"%"===E.peek())){E.back();var Q=E.match(k);if(Q)return[O=(O=Q[0]).replace(a.allLineBreaks,"\n"),_.STRING]}if("<"===O&&E.match(/\!--/g)){for(O="\x3c!--";E.hasNext()&&!E.testChar(a.newline);)O+=E.next();return d=!0,[O,_.COMMENT]}if("-"===O&&d&&E.match(/->/g))return d=!1,["--\x3e",_.COMMENT];if("."===O)return"."===E.peek()&&"."===E.peek(1)?[O+=E.next()+E.next(),_.OPERATOR]:[O,_.DOT];if(s(O,p)){for(;E.hasNext()&&s(O+E.peek(),p)&&(O+=E.next(),E.hasNext()););return","===O?[O,_.COMMA]:"="===O?[O,_.EQUALS]:[O,_.OPERATOR]}return[O,_.UNKNOWN]}this.tokenize=function(){var t,n,a;E=new i(e),d=!1,f=[];for(var s=null,o=[],l=[];!n||n.type!==_.EOF;){for(a=R(),t=new r(a[1],a[0],u,h);t.type===_.COMMENT||t.type===_.BLOCK_COMMENT||t.type===_.UNKNOWN;)t.type===_.BLOCK_COMMENT&&(t.directives=a[2]),l.push(t),a=R(),t=new r(a[1],a[0],u,h);l.length&&(t.comments_before=l,l=[]),t.type===_.START_BLOCK||t.type===_.START_EXPR?(t.parent=n,o.push(s),s=t):(t.type===_.END_BLOCK||t.type===_.END_EXPR)&&s&&("]"===t.text&&"["===s.text||")"===t.text&&"("===s.text||"}"===t.text&&"{"===s.text)&&(t.parent=s.parent,t.opened=s,s=o.pop()),f.push(t),n=t}return f}},e.exports.TOKEN=_},function(e,t,n){var i=n(6),r=n(9),a=n(11);e.exports.js=i,e.exports.css=r,e.exports.html=function(e,t,n,s){return a(e,t,n=n||i,s=s||r)}},function(e,t,n){var i=n(7).Beautifier;e.exports=function(e,t){return new i(e,t).beautify()}},function(e,t,n){var i=n(1).mergeOpts,r=n(0),a=n(3).Output,s=n(4).Tokenizer,_=n(4).TOKEN;function o(e,t){if(!t.multiline_frame&&t.mode!==f.ForInitializer&&t.mode!==f.Conditional){var n=t.start_line_index;e.remove_indent(n)}}function l(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function c(e){return e.replace(/^\s+|\s+$/g,"")}function p(e){return e.replace(/^\s+/g,"")}var u=["before-newline","after-newline","preserve-newline"],h=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].replace(/-/g,"_")]=e[n];return t}(u),d=[h.before_newline,h.preserve_newline],f={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};e.exports.Beautifier=function(e,t){"use strict";var n;t=t||{},e=e||"";var E,x,m,g,b,v,w,k,R,T,O,y,S=[],A="";function N(e,t){var i=0;return e&&(i=e.indentation_level,!n.just_added_newline()&&e.line_indent_level>i&&(i=e.line_indent_level)),{mode:t,parent:e,last_text:e?e.last_text:"",last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:i,line_indent_level:e?e.line_indent_level:i,start_line_index:n.get_line_number(),ternary_depth:0}}(O={})[_.START_EXPR]=function(){F()||K(m);var e=f.Expression;if("["===m.text){if(g===_.WORD||")"===w.last_text)return g===_.RESERVED&&l(w.last_text,x.line_starters)&&(n.space_before_token=!0),W(e),j(),V(),void(y.space_in_paren&&(n.space_before_token=!0));e=f.ArrayLiteral,G(w.mode)&&("["!==w.last_text&&(","!==w.last_text||"]"!==b&&"}"!==b)||y.keep_array_indentation||P()),l(g,[_.START_EXPR,_.END_EXPR,_.WORD,_.OPERATOR])||(n.space_before_token=!0)}else g===_.RESERVED?"for"===w.last_text?(n.space_before_token=y.space_before_conditional,e=f.ForInitializer):l(w.last_text,["if","while"])?(n.space_before_token=y.space_before_conditional,e=f.Conditional):l(w.last_word,["await","async"])?n.space_before_token=!0:"import"===w.last_text&&""===m.whitespace_before?n.space_before_token=!1:(l(w.last_text,x.line_starters)||"catch"===w.last_text)&&(n.space_before_token=!0):g===_.EQUALS||g===_.OPERATOR?$()||M():g===_.WORD?n.space_before_token=!1:M(),(g===_.RESERVED&&("function"===w.last_word||"typeof"===w.last_word)||"*"===w.last_text&&(l(b,["function","yield"])||w.mode===f.ObjectLiteral&&l(b,["{",","])))&&(n.space_before_token=y.space_after_anon_function);";"===w.last_text||g===_.START_BLOCK?P():g!==_.END_EXPR&&g!==_.START_EXPR&&g!==_.END_BLOCK&&"."!==w.last_text&&g!==_.COMMA||M(m.wanted_newline),W(e),j(),y.space_in_paren&&(n.space_before_token=!0),V()},O[_.END_EXPR]=function(){for(;w.mode===f.Statement;)X();K(m),w.multiline_frame&&M("]"===m.text&&G(w.mode)&&!y.keep_array_indentation),y.space_in_paren&&(g!==_.START_EXPR||y.space_in_empty_paren?n.space_before_token=!0:(n.trim(),n.space_before_token=!1)),"]"===m.text&&y.keep_array_indentation?(j(),X()):(X(),j()),o(n,k),w.do_while&&k.mode===f.Conditional&&(k.mode=f.Expression,w.do_block=!1,w.do_while=!1)},O[_.START_BLOCK]=function(){K(m);var e=Z(1),t=Z(2);t&&(l(t.text,[":",","])&&l(e.type,[_.STRING,_.WORD,_.RESERVED])||l(e.text,["get","set","..."])&&l(t.type,[_.WORD,_.RESERVED]))?l(b,["class","interface"])?W(f.BlockStatement):W(f.ObjectLiteral):g===_.OPERATOR&&"=>"===w.last_text?W(f.BlockStatement):l(g,[_.EQUALS,_.START_EXPR,_.COMMA,_.OPERATOR])||g===_.RESERVED&&l(w.last_text,["return","throw","import","default"])?W(f.ObjectLiteral):W(f.BlockStatement);var i=!e.comments_before.length&&"}"===e.text&&"function"===w.last_word&&g===_.END_EXPR;if(y.brace_preserve_inline){var r=0,a=null;w.inline_frame=!0;do{if((a=Z(r+=1)).wanted_newline){w.inline_frame=!1;break}}while(a.type!==_.EOF&&(a.type!==_.END_BLOCK||a.opened!==m))}("expand"===y.brace_style||"none"===y.brace_style&&m.wanted_newline)&&!w.inline_frame?g!==_.OPERATOR&&(i||g===_.EQUALS||g===_.RESERVED&&Q(w.last_text)&&"else"!==w.last_text)?n.space_before_token=!0:P(!1,!0):(!G(k.mode)||g!==_.START_EXPR&&g!==_.COMMA||((g===_.COMMA||y.space_in_paren)&&(n.space_before_token=!0),(g===_.COMMA||g===_.START_EXPR&&w.inline_frame)&&(M(),k.multiline_frame=k.multiline_frame||w.multiline_frame,w.multiline_frame=!1)),g!==_.OPERATOR&&g!==_.START_EXPR&&(g!==_.START_BLOCK||w.inline_frame?n.space_before_token=!0:P())),j(),V()},O[_.END_BLOCK]=function(){for(K(m);w.mode===f.Statement;)X();var e=g===_.START_BLOCK;w.inline_frame&&!e?n.space_before_token=!0:"expand"===y.brace_style?e||P():e||(G(w.mode)&&y.keep_array_indentation?(y.keep_array_indentation=!1,P(),y.keep_array_indentation=!0):P()),X(),j()},O[_.WORD]=Y,O[_.RESERVED]=Y,O[_.SEMICOLON]=function(){F()?n.space_before_token=!1:K(m);for(var e=Z(1);!(w.mode!==f.Statement||w.if_block&&e&&e.type===_.RESERVED&&"else"===e.text||w.do_block);)X();w.import_block&&(w.import_block=!1),j()},O[_.STRING]=function(){F()?n.space_before_token=!0:(K(m),g===_.RESERVED||g===_.WORD||w.inline_frame?n.space_before_token=!0:g===_.COMMA||g===_.START_EXPR||g===_.EQUALS||g===_.OPERATOR?$()||M():P()),j()},O[_.EQUALS]=function(){F()||K(m),w.declaration_statement&&(w.declaration_assignment=!0),n.space_before_token=!0,j(),n.space_before_token=!0},O[_.OPERATOR]=function(){var e="*"===m.text&&(g===_.RESERVED&&l(w.last_text,["function","yield"])||l(g,[_.START_BLOCK,_.COMMA,_.END_BLOCK,_.SEMICOLON])),t=l(m.text,["-","+"])&&(l(g,[_.START_BLOCK,_.START_EXPR,_.EQUALS,_.OPERATOR])||l(w.last_text,x.line_starters)||","===w.last_text);if(F());else{var i=!e;K(m,i)}if(g===_.RESERVED&&Q(w.last_text))return n.space_before_token=!0,void j();if("*"!==m.text||g!==_.DOT)if("::"!==m.text){if(g===_.OPERATOR&&l(y.operator_position,d)&&M(),":"===m.text&&w.in_case)return w.case_body=!0,V(),j(),P(),void(w.in_case=!1);var r=!0,a=!0,s=!1;if(":"===m.text?0===w.ternary_depth?r=!1:(w.ternary_depth-=1,s=!0):"?"===m.text&&(w.ternary_depth+=1),!t&&!e&&y.preserve_newlines&&l(m.text,x.positionable_operators)){var o=":"===m.text,c=o&&s,p=o&&!s;switch(y.operator_position){case h.before_newline:return n.space_before_token=!p,j(),o&&!c||M(),void(n.space_before_token=!0);case h.after_newline:return n.space_before_token=!0,!o||c?Z(1).wanted_newline?P(!1,!0):M():n.space_before_token=!1,j(),void(n.space_before_token=!0);case h.preserve_newline:return p||M(),r=!(n.just_added_newline()||p),n.space_before_token=r,j(),void(n.space_before_token=!0)}}if(e){M(),r=!1;var u=Z(1);a=u&&l(u.type,[_.WORD,_.RESERVED])}else"..."===m.text?(M(),r=g===_.START_BLOCK,a=!1):(l(m.text,["--","++","!","~"])||t)&&(g!==_.COMMA&&g!==_.START_EXPR||M(),r=!1,a=!1,!m.wanted_newline||"--"!==m.text&&"++"!==m.text||P(!1,!0),";"===w.last_text&&z(w.mode)&&(r=!0),g===_.RESERVED?r=!0:g===_.END_EXPR?r=!("]"===w.last_text&&("--"===m.text||"++"===m.text)):g===_.OPERATOR&&(r=l(m.text,["--","-","++","+"])&&l(w.last_text,["--","-","++","+"]),l(m.text,["+","-"])&&l(w.last_text,["--","++"])&&(a=!0)),(w.mode!==f.BlockStatement||w.inline_frame)&&w.mode!==f.Statement||"{"!==w.last_text&&";"!==w.last_text||P());n.space_before_token=n.space_before_token||r,j(),n.space_before_token=a}else j();else j()},O[_.COMMA]=function(){K(m,!0),j(),n.space_before_token=!0,w.declaration_statement?(z(w.parent.mode)&&(w.declaration_assignment=!1),w.declaration_assignment?(w.declaration_assignment=!1,P(!1,!0)):y.comma_first&&M()):w.mode===f.ObjectLiteral||w.mode===f.Statement&&w.parent.mode===f.ObjectLiteral?(w.mode===f.Statement&&X(),w.inline_frame||P()):y.comma_first&&M()},O[_.BLOCK_COMMENT]=function(e){if(n.raw)return n.add_raw_token(m),void(m.directives&&"end"===m.directives.preserve&&(n.raw=y.test_output_raw));if(m.directives)return P(!1,e),j(),"start"===m.directives.preserve&&(n.raw=!0),void P(!1,!0);if(!r.newline.test(m.text)&&!m.wanted_newline)return n.space_before_token=!0,j(),void(n.space_before_token=!0);var t,i=function(e){for(var t=[],n=(e=e.replace(r.allLineBreaks,"\n")).indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}(m.text),a=!1,s=!1,_=m.whitespace_before,o=_.length;for(P(!1,e),i.length>1&&(a=function(e,t){for(var n=0;n<e.length;n++){var i=c(e[n]);if(i.charAt(0)!==t)return!1}return!0}(i.slice(1),"*"),s=function(e,t){for(var n,i=0,r=e.length;i<r;i++)if((n=e[i])&&0!==n.indexOf(t))return!1;return!0}(i.slice(1),_)),j(i[0]),t=1;t<i.length;t++)P(!1,!0),a?j(" "+p(i[t])):s&&i[t].length>o?j(i[t].substring(o)):n.add_token(i[t]);P(!1,e)},O[_.COMMENT]=function(e){m.wanted_newline?P(!1,e):n.trim(!0),n.space_before_token=!0,j(),P(!1,e)},O[_.DOT]=function(){F()||K(m,!0),y.unindent_chained_methods&&U(),g===_.RESERVED&&Q(w.last_text)?n.space_before_token=!1:M(")"===w.last_text&&y.break_chained_methods),j()},O[_.UNKNOWN]=function(e){j(),"\n"===m.text[m.text.length-1]&&P(!1,e)},O[_.EOF]=function(){for(;w.mode===f.Statement;)X();K(m)},t=i(t,"js"),y={},"expand-strict"===t.brace_style?t.brace_style="expand":"collapse-preserve-inline"===t.brace_style?t.brace_style="collapse,preserve-inline":void 0!==t.braces_on_own_line?t.brace_style=t.braces_on_own_line?"expand":"collapse":t.brace_style||(t.brace_style="collapse");var C=t.brace_style.split(/[^a-zA-Z0-9_\-]+/);y.brace_preserve_inline=!1,y.brace_style="collapse";for(var D=0;D<C.length;D++)"preserve-inline"===C[D]?y.brace_preserve_inline=!0:y.brace_style=C[D];for(y.indent_size=t.indent_size?parseInt(t.indent_size,10):4,y.indent_char=t.indent_char?t.indent_char:" ",y.eol=t.eol?t.eol:"auto",y.preserve_newlines=void 0===t.preserve_newlines||t.preserve_newlines,y.unindent_chained_methods=void 0!==t.unindent_chained_methods&&t.unindent_chained_methods,y.break_chained_methods=void 0!==t.break_chained_methods&&t.break_chained_methods,y.max_preserve_newlines=void 0===t.max_preserve_newlines?0:parseInt(t.max_preserve_newlines,10),y.space_in_paren=void 0!==t.space_in_paren&&t.space_in_paren,y.space_in_empty_paren=void 0!==t.space_in_empty_paren&&t.space_in_empty_paren,y.jslint_happy=void 0!==t.jslint_happy&&t.jslint_happy,y.space_after_anon_function=void 0!==t.space_after_anon_function&&t.space_after_anon_function,y.keep_array_indentation=void 0!==t.keep_array_indentation&&t.keep_array_indentation,y.space_before_conditional=void 0===t.space_before_conditional||t.space_before_conditional,y.unescape_strings=void 0!==t.unescape_strings&&t.unescape_strings,y.wrap_line_length=void 0===t.wrap_line_length?0:parseInt(t.wrap_line_length,10),y.e4x=void 0!==t.e4x&&t.e4x,y.end_with_newline=void 0!==t.end_with_newline&&t.end_with_newline,y.comma_first=void 0!==t.comma_first&&t.comma_first,y.operator_position=function(e){if(!l(e=e||h.before_newline,u))throw new Error("Invalid Option Value: The option 'operator_position' must be one of the following values\n"+u+"\nYou passed in: '"+e+"'");return e}(t.operator_position),y.test_output_raw=void 0!==t.test_output_raw&&t.test_output_raw,y.jslint_happy&&(y.space_after_anon_function=!0),t.indent_with_tabs&&(y.indent_char="\t",y.indent_size=1),"auto"===y.eol&&(y.eol="\n",e&&r.lineBreak.test(e||"")&&(y.eol=e.match(r.lineBreak)[0])),y.eol=y.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),v="";y.indent_size>0;)v+=y.indent_char,y.indent_size-=1;var L=0;if(e&&e.length){for(;" "===e.charAt(L)||"\t"===e.charAt(L);)L+=1;A=e.substring(0,L),e=e.substring(L)}function K(e,t){for(var n=e.newlines,i=y.keep_array_indentation&&G(w.mode),r=m,a=0;a<e.comments_before.length;a++)K(m=e.comments_before[a],t),O[m.type](t);if(m=r,i)for(var s=0;s<n;s+=1)P(s>0,t);else if(y.max_preserve_newlines&&n>y.max_preserve_newlines&&(n=y.max_preserve_newlines),y.preserve_newlines&&e.newlines>1){P(!1,t);for(var _=1;_<n;_+=1)P(!0,t)}}g=_.START_BLOCK,b="",(n=new a(v,A)).raw=y.test_output_raw,R=[],W(f.BlockStatement),this.beautify=function(){for(x=new s(e,y,v),S=x.tokenize(),E=0,m=Z();m;)O[m.type](),b=w.last_text,g=m.type,w.last_text=m.text,E+=1,m=Z();return n.get_code(y.end_with_newline,y.eol)};var I=["async","await","break","continue","return","throw","yield"];function M(e){if(e=void 0!==e&&e,!n.just_added_newline()){var t=y.preserve_newlines&&m.wanted_newline||e;if(l(w.last_text,x.positionable_operators)||l(m.text,x.positionable_operators)){var i=l(w.last_text,x.positionable_operators)&&l(y.operator_position,d)||l(m.text,x.positionable_operators);t=t&&i}if(t)P(!1,!0);else if(y.wrap_line_length){if(g===_.RESERVED&&l(w.last_text,I))return;n.current_line.get_character_count()+m.text.length+(n.space_before_token?1:0)>=y.wrap_line_length&&P(!1,!0)}}}function P(e,t){if(!t&&";"!==w.last_text&&","!==w.last_text&&"="!==w.last_text&&(g!==_.OPERATOR||"--"===w.last_text||"++"===w.last_text))for(var i=Z(1);!(w.mode!==f.Statement||w.if_block&&i&&i.type===_.RESERVED&&"else"===i.text||w.do_block);)X();n.add_new_line(e)&&(w.multiline_frame=!0)}function B(){n.just_added_newline()&&(y.keep_array_indentation&&G(w.mode)&&m.wanted_newline?(n.current_line.push(m.whitespace_before),n.space_before_token=!1):n.set_indent(w.indentation_level)&&(w.line_indent_level=w.indentation_level))}function j(e){if(n.raw)n.add_raw_token(m);else{if(y.comma_first&&g===_.COMMA&&n.just_added_newline()&&","===n.previous_line.last()){var t=n.previous_line.pop();n.previous_line.is_empty()&&(n.previous_line.push(t),n.trim(!0),n.current_line.pop(),n.trim()),B(),n.add_token(","),n.space_before_token=!0}e=e||m.text,B(),n.add_token(e)}}function V(){w.indentation_level+=1}function U(){w.indentation_level>0&&(!w.parent||w.indentation_level>w.parent.indentation_level)&&(w.indentation_level-=1)}function W(e){w?(R.push(w),k=w):k=N(null,e),w=N(k,e)}function G(e){return e===f.ArrayLiteral}function z(e){return l(e,[f.Expression,f.ForInitializer,f.Conditional])}function X(){R.length>0&&(k=w,w=R.pop(),k.mode===f.Statement&&o(n,k))}function $(){return w.parent.mode===f.ObjectLiteral&&w.mode===f.Statement&&(":"===w.last_text&&0===w.ternary_depth||g===_.RESERVED&&l(w.last_text,["get","set"]))}function F(){var e=!1;return!!(e=(e=(e=(e=(e=(e=(e=e||g===_.RESERVED&&l(w.last_text,["var","let","const"])&&m.type===_.WORD)||g===_.RESERVED&&"do"===w.last_text)||g===_.RESERVED&&l(w.last_text,I)&&!m.wanted_newline)||g===_.RESERVED&&"else"===w.last_text&&!(m.type===_.RESERVED&&"if"===m.text&&!m.comments_before.length))||g===_.END_EXPR&&(k.mode===f.ForInitializer||k.mode===f.Conditional))||g===_.WORD&&w.mode===f.BlockStatement&&!w.in_case&&!("--"===m.text||"++"===m.text)&&"function"!==b&&m.type!==_.WORD&&m.type!==_.RESERVED)||w.mode===f.ObjectLiteral&&(":"===w.last_text&&0===w.ternary_depth||g===_.RESERVED&&l(w.last_text,["get","set"])))&&(W(f.Statement),V(),K(m,!0),$()||M(m.type===_.RESERVED&&l(m.text,["do","for","if","while"])),!0)}function Q(e){return l(e,["case","return","do","if","throw","else","await","break","continue","async"])}function Z(e){var t=E+(e||0);return t<0||t>=S.length?null:S[t]}function Y(){if(m.type===_.RESERVED&&(l(m.text,["set","get"])&&w.mode!==f.ObjectLiteral?m.type=_.WORD:l(m.text,["as","from"])&&!w.import_block?m.type=_.WORD:w.mode===f.ObjectLiteral&&":"===Z(1).text&&(m.type=_.WORD)),F()?g===_.RESERVED&&l(w.last_text,["var","let","const"])&&m.type===_.WORD&&(w.declaration_statement=!0):!m.wanted_newline||z(w.mode)||g===_.OPERATOR&&"--"!==w.last_text&&"++"!==w.last_text||g===_.EQUALS||!y.preserve_newlines&&g===_.RESERVED&&l(w.last_text,["var","let","const","set","get"])?K(m):(K(m),P()),w.do_block&&!w.do_while){if(m.type===_.RESERVED&&"while"===m.text)return n.space_before_token=!0,j(),n.space_before_token=!0,void(w.do_while=!0);P(),w.do_block=!1}if(w.if_block)if(w.else_block||m.type!==_.RESERVED||"else"!==m.text){for(;w.mode===f.Statement;)X();w.if_block=!1,w.else_block=!1}else w.else_block=!0;return m.type===_.RESERVED&&("case"===m.text||"default"===m.text&&w.in_case_statement)?(P(),(w.case_body||y.jslint_happy)&&(U(),w.case_body=!1),j(),w.in_case=!0,void(w.in_case_statement=!0)):(g!==_.COMMA&&g!==_.START_EXPR&&g!==_.EQUALS&&g!==_.OPERATOR||$()||M(),m.type===_.RESERVED&&"function"===m.text?((l(w.last_text,["}",";"])||n.just_added_newline()&&!l(w.last_text,["(","[","{",":","=",","])&&g!==_.OPERATOR)&&(n.just_added_blankline()||m.comments_before.length||(P(),P(!0))),g===_.RESERVED||g===_.WORD?g===_.RESERVED&&(l(w.last_text,["get","set","new","export"])||l(w.last_text,I))?n.space_before_token=!0:g===_.RESERVED&&"default"===w.last_text&&"export"===b?n.space_before_token=!0:P():g===_.OPERATOR||"="===w.last_text?n.space_before_token=!0:(w.multiline_frame||!z(w.mode)&&!G(w.mode))&&P(),j(),void(w.last_word=m.text)):(T="NONE",g===_.END_BLOCK?k.inline_frame?T="SPACE":m.type===_.RESERVED&&l(m.text,["else","catch","finally","from"])?"expand"===y.brace_style||"end-expand"===y.brace_style||"none"===y.brace_style&&m.wanted_newline?T="NEWLINE":(T="SPACE",n.space_before_token=!0):T="NEWLINE":g===_.SEMICOLON&&w.mode===f.BlockStatement?T="NEWLINE":g===_.SEMICOLON&&z(w.mode)?T="SPACE":g===_.STRING?T="NEWLINE":g===_.RESERVED||g===_.WORD||"*"===w.last_text&&(l(b,["function","yield"])||w.mode===f.ObjectLiteral&&l(b,["{",","]))?T="SPACE":g===_.START_BLOCK?T=w.inline_frame?"SPACE":"NEWLINE":g===_.END_EXPR&&(n.space_before_token=!0,T="NEWLINE"),m.type===_.RESERVED&&l(m.text,x.line_starters)&&")"!==w.last_text&&(T=w.inline_frame||"else"===w.last_text||"export"===w.last_text?"SPACE":"NEWLINE"),m.type===_.RESERVED&&l(m.text,["else","catch","finally"])?(g!==_.END_BLOCK||k.mode!==f.BlockStatement||"expand"===y.brace_style||"end-expand"===y.brace_style||"none"===y.brace_style&&m.wanted_newline)&&!w.inline_frame?P():(n.trim(!0),"}"!==n.current_line.last()&&P(),n.space_before_token=!0):"NEWLINE"===T?g===_.RESERVED&&Q(w.last_text)?n.space_before_token=!0:g!==_.END_EXPR?g===_.START_EXPR&&m.type===_.RESERVED&&l(m.text,["var","let","const"])||":"===w.last_text||(m.type===_.RESERVED&&"if"===m.text&&"else"===w.last_text?n.space_before_token=!0:P()):m.type===_.RESERVED&&l(m.text,x.line_starters)&&")"!==w.last_text&&P():w.multiline_frame&&G(w.mode)&&","===w.last_text&&"}"===b?P():"SPACE"===T&&(n.space_before_token=!0),j(),w.last_word=m.text,void(m.type===_.RESERVED&&("do"===m.text?w.do_block=!0:"if"===m.text?w.if_block=!0:"import"===m.text?w.import_block=!0:w.import_block&&m.type===_.RESERVED&&"from"===m.text&&(w.import_block=!1)))))}}},function(e,t){e.exports.Token=function(e,t,n,i,r){this.type=e,this.text=t,this.comments_before=[],this.comments_after=[],this.newlines=n||0,this.wanted_newline=n>0,this.whitespace_before=i||"",this.parent=r||null,this.opened=null,this.directives=null}},function(e,t,n){var i=n(10).Beautifier;e.exports=function(e,t){return new i(e,t).beautify()}},function(e,t,n){var i=n(1).mergeOpts,r=n(0),a=n(3).Output,s=n(2).InputScanner,_=r.lineBreak,o=r.allLineBreaks;e.exports.Beautifier=function(e,t){e=e||"";var n=(t=i(t=t||{},"css")).indent_size?parseInt(t.indent_size,10):4,r=t.indent_char||" ",l=void 0!==t.preserve_newlines&&t.preserve_newlines,c=void 0===t.selector_separator_newline||t.selector_separator_newline,p=void 0!==t.end_with_newline&&t.end_with_newline,u=void 0===t.newline_between_rules||t.newline_between_rules,h=void 0!==t.space_around_combinator&&t.space_around_combinator;h=h||void 0!==t.space_around_selector_separator&&t.space_around_selector_separator;var d=t.eol?t.eol:"auto";t.indent_with_tabs&&(r="\t",n=1),"auto"===d&&(d="\n",e&&_.test(e||"")&&(d=e.match(_)[0])),d=d.replace(/\\r/,"\r").replace(/\\n/,"\n");var f,E,x=/\s/,m=/(?:\s|\n)+/g,g=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,b=/\/\/(?:[^\n\r\u2028\u2029]*)/g,v=0;function w(e){var t="";for(f=E.next();f;){if(t+=f,"\\"===f)t+=E.next();else if(-1!==e.indexOf(f)||"\n"===f)break;f=E.next()}return t}function k(e){for(var t=x.test(E.peek()),n=!0;x.test(E.peek());)f=E.next(),e&&"\n"===f&&(l||n)&&(n=!1,A.add_new_line(!0));return t}function R(){for(var e=0,t=1,n=E.peek(t);n;){if("{"===n)return!0;if("("===n)e+=1;else if(")"===n){if(0===e)return!1;e-=1}else if(";"===n||"}"===n)return!1;t++,n=E.peek(t)}return!1}var T="",O=0;if((e=e.replace(o,"\n"))&&e.length){for(;" "===e.charAt(O)||"\t"===e.charAt(O);)O+=1;T=e.substring(0,O),e=e.substring(O)}var y,S,A,N=new Array(n+1).join(r);function C(e){A.just_added_newline()&&A.set_indent(y),A.add_token(e)}function D(e){e&&(A.space_before_token=!0)}this.beautify=function(){A=new a(N,T),E=new s(e),y=0,S=0,f=null,v=0;for(var t=!1,n=!1,i=!1,r=!1;;){var _=""!==E.readWhile(m);if(!(f=E.next()))break;if("/"===f&&"*"===E.peek())A.add_new_line(),E.back(),C(E.readWhile(g)),k(!0),A.add_new_line();else if("/"===f&&"/"===E.peek())A.space_before_token=!0,E.back(),C(E.readWhile(b)),k(!0);else if("@"===f)if(D(_),"{"===E.peek())C(f+w("}"));else{C(f);var o=E.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);o.match(/[ :]$/)&&(C(o=w(": ").replace(/\s$/,"")),A.space_before_token=!0),"extend"===(o=o.replace(/\s$/,""))&&(r=!0),o in this.NESTED_AT_RULE?(S+=1,o in this.CONDITIONAL_GROUP_RULE&&(i=!0)):t||0!==v||-1===o.indexOf(":")||(n=!0)}else"#"===f&&"{"===E.peek()?(D(_),C(f+w("}"))):"{"===f?E.match(/[\t\n ]*}/g)?(A.space_before_token=!0,C("{}"),k(!0),A.add_new_line(),u&&0===y&&!A.just_added_blankline()&&A.add_new_line(!0)):(y++,A.space_before_token=!0,C(f),k(!0),A.add_new_line(),i?(i=!1,t=y>S):t=y>=S):"}"===f?(y>0&&y--,A.add_new_line(),C(f),t=!1,n=!1,S&&S--,k(!0),A.add_new_line(),u&&0===y&&!A.just_added_blankline()&&A.add_new_line(!0)):":"===f?!t&&!i||E.lookBack("&")||R()||E.lookBack("(")||r?(E.lookBack(" ")&&(A.space_before_token=!0),":"===E.peek()?(f=E.next(),C("::")):C(":")):(C(":"),n||(n=!0,A.space_before_token=!0)):'"'===f||"'"===f?(D(_),C(f+w(f))):";"===f?(n=!1,r=!1,C(f),k(!0),"/"!==E.peek()&&A.add_new_line()):"("===f?E.lookBack("url")?(C(f),k(),(f=E.next())&&(")"!==f&&'"'!==f&&"'"!==f?C(f+w(")")):(E.back(),v++))):(v++,D(_),C(f),k()):")"===f?(C(f),v--):","===f?(C(f),k(!0),c&&!n&&v<1?A.add_new_line():A.space_before_token=!0):(">"===f||"+"===f||"~"===f)&&!n&&v<1?h?(A.space_before_token=!0,C(f),A.space_before_token=!0):(C(f),k(),f&&x.test(f)&&(f="")):"]"===f?C(f):"["===f?(D(_),C(f)):"="===f?(k(),C("="),x.test(f)&&(f="")):"!"===f?(C(" "),C(f)):(D(_),C(f))}return A.get_code(p,d)},this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}},function(e,t,n){var i=n(12).Beautifier;e.exports=function(e,t,n,r){return new i(e,t,n,r).beautify()}},function(e,t,n){var i=n(1).mergeOpts,r=n(0),a=n(2).InputScanner,s=r.lineBreak,_=r.allLineBreaks;function o(e){return e.replace(/\s+$/g,"")}e.exports.Beautifier=function(e,t,n,r){var l,c,p,u,h,d,f,E,x,m,g,b,v,w,k,R,T,O,y,S,A,N,C;e=e||"",void 0!==(t=i(t=t||{},"html")).wrap_line_length&&0!==parseInt(t.wrap_line_length,10)||void 0===t.max_char||0===parseInt(t.max_char,10)||(t.wrap_line_length=t.max_char),c=void 0!==t.indent_inner_html&&t.indent_inner_html,p=void 0===t.indent_body_inner_html||t.indent_body_inner_html,u=void 0===t.indent_head_inner_html||t.indent_head_inner_html,h=void 0===t.indent_size?4:parseInt(t.indent_size,10),d=void 0===t.indent_char?" ":t.indent_char,E=void 0===t.brace_style?"collapse":t.brace_style,f=0===parseInt(t.wrap_line_length,10)?32786:parseInt(t.wrap_line_length||250,10),x=t.inline||["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","strike","tt"],m=t.unformatted||[],g=t.content_unformatted||["pre","textarea"],b=void 0===t.preserve_newlines||t.preserve_newlines,v=b?isNaN(parseInt(t.max_preserve_newlines,10))?32786:parseInt(t.max_preserve_newlines,10):0,w=void 0!==t.indent_handlebars&&t.indent_handlebars,k=void 0===t.wrap_attributes?"auto":t.wrap_attributes,R=isNaN(parseInt(t.wrap_attributes_indent_size,10))?h:parseInt(t.wrap_attributes_indent_size,10),T="force"===k.substr(0,"force".length),O="force-expand-multiline"===k,y="force-aligned"===k,S="aligned-multiple"===k,A=void 0!==t.end_with_newline&&t.end_with_newline,N="object"==typeof t.extra_liners&&t.extra_liners?t.extra_liners.concat():"string"==typeof t.extra_liners?t.extra_liners.split(","):"head,body,/html".split(","),C=t.eol?t.eol:"auto",t.indent_with_tabs&&(d="\t",h=1),"auto"===C&&(C="\n",e&&s.test(e||"")&&(C=e.match(s)[0])),C=C.replace(/\\r/,"\r").replace(/\\n/,"\n"),e=e.replace(_,"\n"),this.beautify=function(){(l=new function(){return this.token="",this.current_mode="CONTENT",this.tags={parent:null,tag:"",indent_level:0,token:null},this.last_token={text:"",type:""},this.token_text="",this.newlines=0,this.indent_content=c,this.indent_body_inner_html=p,this.indent_head_inner_html=u,this.Utils={whitespace:"\n\r\t ".split(""),single_token:t.void_elements||["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","?=","basefont","isindex"],extra_liners:N,in_array:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.is_whitespace=function(e){for(var t=0;t<e.length;t++)if(!this.Utils.in_array(e.charAt(t),this.Utils.whitespace))return!1;return!0},this.traverse_whitespace=function(){var e="";if(this.Utils.in_array(this.input.peek(),this.Utils.whitespace)){this.newlines=0;do{e=this.input.next(),b&&"\n"===e&&this.newlines<=v&&(this.newlines+=1)}while(this.Utils.in_array(this.input.peek(),this.Utils.whitespace));return!0}return!1},this.space_or_wrap=function(e){return this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e),!0):(this.line_char_count++,e.push(" "),!1)},this.get_content=function(){for(var e="",t={parent:this.tags.token,text:"",type:"TK_CONTENT"},n=[];!("<"===this.input.peek()||w&&this.input.test(/\{\{/g));){if(!this.input.hasNext()){n.length||(t.type="TK_EOF");break}this.traverse_whitespace()?this.space_or_wrap(n):(e=this.input.next(),this.line_char_count++,n.push(e))}return t.text=n.join(""),t},this.get_contents_to=function(e){if(!this.input.hasNext())return{text:"",type:"TK_EOF"};var t=new RegExp("</"+e+"\\s*>","igm");return{text:this.input.readUntil(t),type:"TK_"+e}},this.record_tag=function(e,t){var n={parent:this.tags,tag:e,indent_level:this.indent_level,token:t};this.tags=n},this.retrieve_tag=function(e){for(var t=null,n=this.tags;n&&n.tag!==e;)n=n.parent;return n&&(t=n.token,this.indent_level=n.indent_level,this.tags=n.parent),t},this.indent_to_tag=function(e){for(var t=this.tags;t&&t.tag!==e;)t=t.parent;t&&(this.indent_level=t.indent_level)},this.get_tag=function(){var e,t="",n={parent:this.tags.token,text:"",type:"",tag_name:"",is_inline_tag:!1,is_unformatted:!1,is_content_unformatted:!1,is_opening_tag:!1,is_closing_tag:!1,multiline_content:!1,start_tag_token:null},i=[],r="",a=!1,s=!0,_=!1,o=!1,l="",c=!1,p=this.input.peek(),u=this.input.peek(1),h=this.input.peek(2);"<"!==p||"!"!==u&&"?"!==u&&"%"!==u?w&&"{"===p&&"{"===u&&"!"===h?(e="{",l=(t=this.get_comment()).match(/^{{([^\s}]+)/)[1],i=[t],o=!0):"<"===p?(i.push(this.input.next()),e="<",l=this.input.readUntil(/[\s>{]/g).toLowerCase(),i.push(l),a=!0):w&&"{"===p&&"{"===u&&(i.push(this.input.next()),i.push(this.input.next()),"#"===h&&i.push(this.input.next()),e="{",l=this.input.readUntil(/[\s}]/g).toLowerCase(),i.push(l),a=!1):(e="<",l=(t=this.get_comment()).match(/^<([^\s>]+)/)[1],i=[t],o=!0),n.is_closing_tag="/"===l.charAt(0),n.tag_name=n.is_closing_tag?l.substr(1):l,n.is_inline_tag=this.Utils.in_array(n.tag_name,x)||"{"===e,n.is_unformatted=this.Utils.in_array(l,m),n.is_content_unformatted=this.Utils.in_array(l,g);var d=R;if((y||S)&&(d=i.join("").length+1),this.line_char_count+=i.join("").length,!o){for(;this.input.hasNext();){if(t=this.input.next(),w&&"{"===e&&i.length>2&&"}"===t&&"}"===i[i.length-1]){this.line_char_count++,i.push(t);break}if("'"!==t&&'"'!==t||(t+=this.get_unformatted(t),"{"!==e&&(a=!0)),n.is_unformatted)i.push(t),this.line_char_count++;else if(this.Utils.in_array(t,this.Utils.whitespace))a=!0;else{if("<"===e&&("="===t&&(a=!1),!O||!_||c||">"!==t&&"/"!==t||this.input.test(/\/?\s*>/g,-1)&&(a=!1,c=!0,this.print_newline(!1,i),this.print_indentation(i))),a)if("{"===e)this.line_char_count++,i.push(" "),a=!1;else if(i.length&&"="!==i[i.length-1]&&">"!==t&&a){var f=this.space_or_wrap(i)&&"/"!==t&&!T;if(a=!1,T&&"/"!==t){var E=!1;O&&s&&(E=!this.input.test(/\S*(="([^"]|\\")*")?\s*\/?\s*>/g,-1)),s&&!E||(this.print_newline(!1,i),this.print_indentation(i),f=!0)}if(f){_=!0;for(var b=0;b<d;b++)this.line_char_count++,i.push(" ")}if(s)for(var v=0;v<i.length;v++)if(" "===i[v]){s=!1;break}}if(w&&"<"===e&&"{"===t&&"{"===this.input.peek()&&(t+=this.get_unformatted("}}"),i.length&&" "!==i[i.length-1]&&"<"!==i[i.length-1]&&(t=" "+t),a=!0),this.line_char_count++,i.push(t),">"===t)break}}if(!t)return i.length?n.text=i.join(""):n.type="TK_EOF",n}var k=i.join("");return"/"===k.charAt(k.length-2)||this.Utils.in_array(l,this.Utils.single_token)?(n.type="TK_TAG_SINGLE",n.is_closing_tag=!0):w&&"{"===e&&"else"===l?(this.indent_to_tag("if"),n.type="TK_TAG_HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):w&&"{"===e&&-1===k.charAt(2).search(/[#\^\/]/)?(n.type="TK_TAG_SINGLE",n.is_closing_tag=!0):n.is_unformatted||n.is_content_unformatted?(r=this.get_unformatted("</"+l+">",k),i.push(r),n.type="TK_TAG_SINGLE",n.is_closing_tag=!0):"script"===l&&(-1===k.search("type")||k.search("type")>-1&&k.search(/\b(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1)?(this.record_tag(l),n.type="TK_TAG_SCRIPT"):"style"===l&&(-1===k.search("type")||k.search("type")>-1&&k.search("text/css")>-1)?(this.record_tag(l),n.type="TK_TAG_STYLE"):"!"===l.charAt(0)?(n.type="TK_TAG_SINGLE",this.traverse_whitespace()):(n.is_closing_tag?(n.start_tag_token=this.retrieve_tag(l.substring(1)),n.type="TK_TAG_END"):(this.record_tag(l,n),"html"!==l.toLowerCase()&&(this.indent_content=!0),n.type="TK_TAG_START",n.is_opening_tag=!0),this.traverse_whitespace()&&this.space_or_wrap(i),this.Utils.in_array(l,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),n.text=i.join(""),n},this.get_comment=function(){for(var e="",t=">",n=!1,i=this.input.next();i&&((e+=i).charAt(e.length-1)!==t.charAt(t.length-1)||-1===e.indexOf(t));)n||(n=e.length>10,0===e.indexOf("<![if")?(t="<![endif]>",n=!0):0===e.indexOf("<![cdata[")?(t="]]>",n=!0):0===e.indexOf("<![")?(t="]>",n=!0):0===e.indexOf("\x3c!--")?(t="--\x3e",n=!0):0===e.indexOf("{{!--")?(t="--}}",n=!0):0===e.indexOf("{{!")?5===e.length&&-1===e.indexOf("{{!--")&&(t="}}",n=!0):0===e.indexOf("<?")?(t="?>",n=!0):0===e.indexOf("<%")&&(t="%>",n=!0)),i=this.input.next();return e},this.get_unformatted=function(e,t){if(t&&-1!==t.toLowerCase().indexOf(e))return"";var n="",i=[],r=!0,a=function(e){var t="";return{add:function(n){var i=t+n.toLowerCase();t=i.length<=e.length?i:i.substr(i.length-e.length,e.length)},doesNotMatch:function(){return-1===t.indexOf(e)}}}(e);do{if(!this.input.hasNext())return i.join("");if(n=this.input.next(),this.Utils.in_array(n,this.Utils.whitespace)){if(!r){this.line_char_count--;continue}if("\n"===n||"\r"===n){i.push("\n"),this.line_char_count=0;continue}}i.push(n),a.add(n),this.line_char_count++,r=!0,w&&"{"===n&&i.length>=2&&"{"===i[i.length-2]&&i.push(this.get_unformatted("}}"))}while(a.doesNotMatch());return i.join("")},this.get_token=function(){var e;if("TK_TAG_SCRIPT"===this.last_token.type||"TK_TAG_STYLE"===this.last_token.type){var t=this.last_token.type.substr(7);e=this.get_contents_to(t)}else"CONTENT"===this.current_mode?""===(e=this.get_content()).text&&(e=this.get_tag()):"TAG"===this.current_mode&&(e=this.get_tag());return e},this.get_full_indent=function(e){return(e=this.indent_level+e||0)<1?"":Array(e+1).join(this.indent_string)},this.printer=function(e,t,n,i,r){e=(e=e||"").replace(/\r\n|[\r\u2028\u2029]/g,"\n"),this.input=new a(e),this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=r,this.indent_level=0,this.wrap_line_length=i,this.line_char_count=0;for(var s=0;s<this.indent_size;s++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){t&&t.length&&(e||"\n"!==t[t.length-1])&&(this.line_char_count=0,"\n"!==t[t.length-1]&&(t[t.length-1]=o(t[t.length-1])),t.push("\n"))},this.print_indentation=function(e){for(var t=0;t<this.indent_level;t++)e.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(e){this.is_whitespace(e)&&!this.output.length||((e||""!==e)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),e=function(e){return e.replace(/^\s+/g,"")}(e)),this.print_token_raw(e))},this.print_token_raw=function(e){this.newlines>0&&(e=o(e)),e&&""!==e&&(e.length>1&&"\n"===e.charAt(e.length-1)?(this.output.push(e.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(e));for(var t=0;t<this.newlines;t++)this.print_newline(t>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}).printer(e,d,h,f,E);for(var i=null,s={text:"",type:"",tag_name:"",is_opening_tag:!1,is_closing_tag:!1,is_inline_tag:!1};"TK_EOF"!==(i=l.get_token()).type;){switch(i.type){case"TK_TAG_START":i.is_inline_tag||"TK_CONTENT"===l.last_token.type||(i.parent&&(i.parent.multiline_content=!0),l.print_newline(!1,l.output)),l.print_token(i.text),l.indent_content&&(!l.indent_body_inner_html&&"body"===i.tag_name||!l.indent_head_inner_html&&"head"===i.tag_name||l.indent(),l.indent_content=!1),s=i,l.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":l.print_newline(!1,l.output),l.print_token(i.text),s=i,l.current_mode="CONTENT";break;case"TK_TAG_END":(i.start_tag_token&&i.start_tag_token.multiline_content||!(i.is_inline_tag||s.is_inline_tag||l.last_token===s&&s.is_opening_tag&&i.is_closing_tag&&s.tag_name===i.tag_name||"TK_CONTENT"===l.last_token.type))&&l.print_newline(!1,l.output),l.print_token(i.text),s=i,l.current_mode="CONTENT";break;case"TK_TAG_SINGLE":"!--"===i.tag_name&&l.last_token.is_closing_tag&&-1===i.text.indexOf("\n")||i.is_inline_tag||i.is_unformatted||l.print_newline(!1,l.output),l.print_token(i.text),s=i,l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":for(var _=!1,k=l.output.length-1;k>=0&&"\n"!==l.output[k];k--)if(l.output[k].match(/{{#if/)){_=!0;break}_||l.print_newline(!1,l.output),l.print_token(i.text),l.indent_content&&(l.indent(),l.indent_content=!1),s=i,l.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_COMMENT":l.print_token(i.text),l.current_mode="TAG";break;case"TK_CONTENT":if(l.print_token(i.text),l.current_mode="TAG",!i.text)continue;break;case"TK_STYLE":case"TK_SCRIPT":if(""!==i.text){l.print_newline(!1,l.output);var D,L=i.text,K=1;"TK_SCRIPT"===i.type?D="function"==typeof n&&n:"TK_STYLE"===i.type&&(D="function"==typeof r&&r),"keep"===t.indent_scripts?K=0:"separate"===t.indent_scripts&&(K=-l.indent_level);var I=l.get_full_indent(K);if(D){var M=function(){this.eol="\n"};M.prototype=t;var P=new M;L=D(L.replace(/^\s*/,I),P)}else{var B=L.match(/^\s*/)[0].match(/[^\n\r]*$/)[0].split(l.indent_string).length-1,j=l.get_full_indent(K-B);L=L.replace(/^\s*/,I).replace(/\r\n|\r|\n/g,"\n"+j).replace(/\s+$/,"")}L&&(l.print_token_raw(L),l.print_newline(!0,l.output))}l.current_mode="TAG";break;default:""!==i.text&&l.print_token(i.text)}l.last_token=i}var V=l.output.join("").replace(/[\r\n\t ]+$/,"");return A&&(V+="\n"),"\n"!==C&&(V=V.replace(/[\n]/g,C)),V}}}])});
//# sourceMappingURL=beautifier.min.js.map